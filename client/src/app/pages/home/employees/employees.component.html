<nav class="navbar bg-body-tertiary bg-light">
  <div class="container-fluid text-right justify-content-between">
    <h1 class="navbar-brand user-select-none">Employees</h1>

    <!--
    <app-add-something-new [data]="add_employee_type_modal_data">
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Employee type name" id="employeeTypeName">
        <div class="input-group-append">
          <button class="btn btn-outline-danger" type="button">Clear</button>
        </div>
      </div>
    </app-add-something-new>
    -->
    <app-add-something-new [data]="add_employee_modal_data" (save)="addEmployee()">
      <div class="input-group mb-3">
        <input [(ngModel)]="tmpEmployee.user.name" type="text" class="form-control" placeholder="Employee name"
          id="employeeName">
        <div class="input-group-append">
          <button (click)="tmpEmployee.user.name=''" class="btn btn-outline-danger" type="button">Clear</button>
        </div>
      </div>

      <div class="mb-3">
        <label for="select_employee_role">Select employee role</label>
        <select [(ngModel)]="tmpEmployee.user.userGroup" class="form-select form-select-md mb-2"
          id="select_employee_role">
          @for(employeeGroup of vars.getEmployeeGroups().values();track employeeGroup){
          <option [ngValue]="employeeGroup">{{employeeGroup.name}}</option>
          }
        </select>
      </div>
    </app-add-something-new>


    <div class="d-flex ms-auto" role="search">
      <input [(ngModel)]="filterEmployee" class="form-control me-2" maxLength='5' type="search" placeholder="Search"
        aria-label="Search">
    </div>
  </div>
</nav>
<div class="text-info" *ngIf="filterEmployee!=''">Filtered Result</div>
<table class="table" id="table_Table">
  <thead>
    <tr>
      <th scope="col">Name.</th>
      <th scope="col">Status</th>
      <th scope="col">Auth token</th>
      <th scope="col" style="width:30px"></th>
      <th scope="col" style="width:30px"></th>
    </tr>
  </thead>
  <tbody>
    @for(employee of filterEmployees();track employee;){
    <tr>
      <th cope="row">{{employee.user.name}}</th>
      <th cope="row">{{employee.user.userGroup.name}}</th>
      <td (click)="copyToClipBoard(employee.user.password)" style="user-select: none;">
        <div class="d-flex">
          <div style="max-width: 1in;width:1in; overflow:hidden;">
            {{employee.user.password}}
          </div>
          <div class="ms-4">
            @if(copiedText!=employee.user.password ){
            <button type="button" class="btn btn-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-clipboard2" viewBox="0 0 16 16">
                <path
                  d="M3.5 2a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-12a.5.5 0 0 0-.5-.5H12a.5.5 0 0 1 0-1h.5A1.5 1.5 0 0 1 14 2.5v12a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 14.5v-12A1.5 1.5 0 0 1 3.5 1H4a.5.5 0 0 1 0 1z">
                </path>
                <path
                  d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5">
                </path>
              </svg>
            </button>
            }
            @else{
            <button type="button" class="btn btn-success">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check"
                viewBox="0 0 16 16">
                <path
                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z">
                </path>
              </svg>
            </button>
            }
          </div>
        </div>
      </td>
      <td><button class="btn btn-primary">Edit </button></td>
      <td><button (click)="deleteEmployee(this.employee)" class="btn btn-danger"> Delete</button></td>
    </tr>
    }
  </tbody>
</table>
